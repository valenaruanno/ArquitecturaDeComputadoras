ID EQU 10
EOI EQU 20H 
IMR EQU 21H 
INT2 EQU 26H 
HAND_DATO EQU 40H 
HAND_ESTADO EQU 41H 

ORG 40 
SHAKE DW IMPRIMIR 

ORG 1000H 
CAD DB "UNIVERSIDAD NACIONAL DE LA PLATA"
FINCAD DB ?
FLAG DB 0

ORG 3000H 
IMPRIMIR: PUSH AX 
MOV AL, [BX]
OUT HAND_DATO, AL 
INC BX 
CMP BX, OFFSET FINCAD 
JNZ SEGUIR 
IN AL, HAND_ESTADO 
AND AL, 10000000B
OUT HAND_ESTADO
MOV AL, 255
OUT IMR, AL 
MOV FLAG, 1
SEGUIR: MOV AL, 20H 
OUT EOI, AL 
POP AX 
IRET 

ORG 2000H 
CLI 
MOV AL, 11111011B
OUT IMR, AL 
MOV AL, ID 
OUT INT2, AL 
STI 
MOV BX, OFFSET CAD 
IN AL, HAND_ESTADO 
OR AL, 10000000B
OUT HAND_ESTADO, AL 
POLL: CMP FLAGM 1 
JNZ POLL 
INT 0 
END 
