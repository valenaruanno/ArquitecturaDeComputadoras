ID EQU 10 
INT1 EQU 20H 
EOI EQU 20H
IMR EQU 21H 
COMP EQU 11H 
CONT EQU 10H 

ORG 40 
IP_CLW DW RUT_CLK

ORG 1000H 
SEG DB 30H 
DB 30H 
DB 3AH 
DB 30H 
FIN DB ? 

ORG 3000H 
INC SEG+4
CMP SEG+4, 3AH 
JZ RESET 
MOV SEG+4, 30H 
INC SEG+3 
CMP SEG+3, 36H 
JNZ RESET 
MOV SEG+3, 30H 
INC SEG+1 
CMP SEG+1, 3AH 
JNZ RESET 
MOV SEG+1, 30H 
INC SEG 
CMP SEG, 36H
JNZ RESET 
MOV SEG+1, 30H 
RESET: INT 7 
MOV AL, 0 
OUT CONT, AL 
MOV AL, 20H 
OUT EOI, AL 
POP AX 
IRET 

ORG 2000H
CLI 
MOV AL, 0FDH 
OUT IMR, AL 
MOV AL, ID 
OUT INT1, AL 
MOV AL, 0 
OUT CONT, AL 
MOV BX, OFFSET SEG 
MOV AL, OFFSET FIN - OFFSET SEG 
STI 
LAZO: JMP LAZO 
END 

